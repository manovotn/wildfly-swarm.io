<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="WildFly Swarm Official Website"><link rel="icon" href="/favicon.ico"><link rel="alternate" type="application/rss+xml" title="RSS Feed for wildfly-swarm.io" href="/rss.xml"><title>Announcing WildFly Swarm 2016.12.0 | Thorntail</title><link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="/assets/css/headers/header-default.css"><link rel="stylesheet" href="/assets/css/footers/footer-v1.css"><link rel="stylesheet" href="/assets/plugins/animate.css"><link rel="stylesheet" href="/assets/plugins/line-icons/line-icons.css"><link rel="stylesheet" href="/assets/plugins/parallax-slider/css/parallax-slider.css"><link rel="stylesheet" href="/assets/plugins/owl-carousel/owl-carousel/owl.carousel.css"><link rel="stylesheet" href="/assets/css/theme-colors/default.css" id="style_color"><link rel="stylesheet" href="/assets/css/theme-skins/dark.css"><link rel="stylesheet" href="/assets/css/custom.css"><link rel="stylesheet" media="screen" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,800"><link rel="stylesheet" media="screen" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" media="screen" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/default.min.css"><link rel="stylesheet" href="/css/site.css"></head><body><div class="header"><div class="container"><a href="/" class="logo"><img src="/images/swarm_icon_32x32.png" class="icon"><span style="font-size:20px;vertical-align:middle;color:#555;margin-left:10px">WildFly Swarm</span></a><div class="topbar"><ul class="loginbar pull-right"><li class="hoverSelector"><a href="http://jboss.org">JBoss.org</a></li><li class="topbar-devider"></li><li class="hoverSelector"><a href="http://redhat.com">Red Hat</a></li><li class="hoverSelector"><img style="margin-left:10px" src="https://img.shields.io/maven-central/v/io.thorntail/bom.svg?maxAge=604800"></li></ul></div><button type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" class="navbar-toggle"><span class="sr-only">Toggle Navigation</span><span class="fa fa-bars"></span></button></div><div id="navbar" aria-expanded="false" class="navbar-collapse mega-menu navbar-responsive-collapse collapse"><div class="container"><ul class="nav navbar-nav"><li><a href="/generator" class="dropdown-toggle">Generator</a></li><li><a href="/archive">Blog</a></li><li><a href="/documentation">Documentation</a></li><li><a href="/community">Community</a></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Resources</a><ul class="dropdown-menu"><li><a href="/downloads">Downloads</a></li><li><a href="/resources">Presentations</a></li></ul></li></ul></div></div></div><div class="wrapper"><div class="breadcrumbs"><div class="container"><div class="pull-left"><h1>Blog</h1></div><div class="ul pull-right breadcrumb"><li class="active"><a href="/archive">Archive</a></li><li><span>Post</span></li></div></div></div><div class="container"><div class="row margin-top-20"><div class="col-md-10"><article id="article"><h1>Announcing WildFly Swarm 2016.12.0</h1><div class="post-meta">By The WildFly Swarm Team | Published Dec 1, 2016</div><div><div class="sect1">
<h2 id="_it_s_december_wildfly_swarm_2016_12_0_swings_in_like_a_monkey">It&#8217;s December, WildFly Swarm 2016.12.0 swings in like a monkey.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since December 14th is Monkey Day (look it up!), we&#8217;re shipping
WildFly Swarm 2016.12.0 with a side-dish of bananas.  Bananas.</p>
</div>
<div class="sect2">
<h3 id="_what_s_new">What&#8217;s New?</h3>
<div class="ulist">
<ul>
<li>
<p>More configurability</p>
</li>
<li>
<p>Bring-You-Own JDBC driver</p>
</li>
<li>
<p>Improvements to the health/monitoring</p>
</li>
<li>
<p>Improvements to OpenShift support</p>
</li>
<li>
<p>Fluentd logging support</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_what_is_wildfly_swarm">What is WildFly Swarm?</h3>
<div class="paragraph">
<p>WildFly Swarm is the decomposition and reconstitution of the popular
<a href="http://www.wildfly.org">WildFly Java Application Server</a> in order to support <em>just enough appserver</em>
for microservice type applications.</p>
</div>
<div class="paragraph">
<p>Each portion of the appserver is referred to as a <em>fraction</em>, which many times
maps to a <code>subsystem</code> from WildFly, but also may include other discrete chunks
of non-Java EE or WildFly functionality, such as <em>Swagger</em>, or <em>Jolokia</em>.</p>
</div>
<!-- more -->
</div>
</div>
</div>
<div class="sect1">
<h2 id="_more_configurability">More Configurability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some time was spent to make everything more consistently configurable without
requiring you to write your own <code>main(&#8230;&#8203;)</code> method.  While we&#8217;ve supported
<code>project-stages.yml</code> and Java system properties for a while, the things that
were configurable using them was hit-or-miss.</p>
</div>
<div class="paragraph">
<p>Now, through <code>project-stages.yml</code> you can accomplish most any configuration
of fractions that would&#8217;ve normally required a <code>main(&#8230;&#8203;)</code>.  When booting up
your application, you&#8217;ll now see a rather verbose set of output, similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>...
swarm.management.http-interface-management-interface.socket-binding = management-http
swarm.management.http.port                                          = 9990
swarm.management.https.port                                         = 9993
swarm.request-controller.active-requests                            = (unset)
swarm.request-controller.max-requests                               = (unset)
swarm.request-controller.track-individual-endpoints                 = (unset)
swarm.undertow.alias                                                = (unset)
swarm.undertow.buffer-caches.default.buffer-size                    = (unset)
swarm.undertow.buffer-caches.default.buffers-per-region             = (unset)
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>We currently display all configurable items, even if unset.  If you have a
<code>main(&#8230;&#8203;)</code> with customizations, those customizations will be visible during
boot.  For those of you who are security-minded, we also redact any configuration item
that might be a password.</p>
</div>
<div class="paragraph">
<p>The naming of the configuration items follows the structure of the
Fraction APIs you may have already been using to configure your application.
While these names are as dotted properties, and can be ultimately set
using <code>-Dkey=value</code> on the command-line, they also represent the
YAML tree you can use from within a <code>project-stages.yml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">swarm:
  management:
    http:
      port: 9990
    https:
      port: 9993</code></pre>
</div>
</div>
<div class="paragraph">
<p>The general format is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">swarm:
  fraction-name:
    # fraction attribute
    attribute-key: value
    # collection of subresources
    subresource-type:
      subresource-key:
        attribute-key: value
    # singleton subresource
    subresource-key:
      attribute-key: value</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, you now use <code>project-stages.yml</code> not only to configure existing
components, but it may be used to create new configured components.  This is
primarily thought to be useful for defining items such as datasources.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">swarm:
  datasources:
    data-sources:
      MyDS:
        driver-name: myh2
        connection-url: jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
        user-name: sa
        password: sa
      MyOtherDS:
        driver-name: myh2
        connection-url: jdbc:h2:mem:other-test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
        user-name: sa
        password: sa</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bring_your_own_jdbc_driver">Bring-your-own JDBC driver</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>WARNING: Breaking change!</strong></p>
</div>
<div class="paragraph">
<p>Previously we provided Maven artifacts that transitively brought in particular
JDBC drivers to make it easier to integrate them with the underlying WildFly
datasources subsystem.  This was problematic due to the fact that we had to
select specific versions of a given driver and also couldn&#8217;t support non-freely-available
drivers.</p>
</div>
<div class="paragraph">
<p>We have completely removed our DB driver fractions.  They are <strong>gone</strong>.</p>
</div>
<div class="paragraph">
<p>You now get to bring your own JDBC driver.  In fact, you <strong>must</strong> bring your own
JDBC driver.  All that&#8217;s required though is just adding it as a normal
Maven dependency to your project.</p>
</div>
<div class="paragraph">
<p>e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;com.h2database&lt;/groupId&gt;
  &lt;artifactId&gt;h2&lt;/artifactId&gt;
  &lt;version&gt;1.4.187&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>That being said, we have replaced our own inclusion of specific versions
of specific drivers with enough logic to handle the setup of the WildFly
driver, the creation (at runtime) of the relevant <code>module.xml</code> to load it.</p>
</div>
<div class="paragraph">
<p>We now auto-detect the following database JDBC drivers and attempt to configure them
correctly:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>H2</p>
</li>
<li>
<p>MySQL</p>
</li>
<li>
<p>PostgreSQL</p>
</li>
<li>
<p>EnterpriseDB</p>
</li>
<li>
<p>Oracle</p>
</li>
<li>
<p>SQLServer</p>
</li>
<li>
<p>Sybase</p>
</li>
<li>
<p>DB2</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This includes noticing if you have a DB2 license <code>jar</code> because you&#8217;re
connecting to an AS/400 or whatnot.</p>
</div>
<div class="paragraph">
<p>That being said, we haven&#8217;t access to a few of the non-freely-available
databases, so we welcome reports of any issues discovered.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_health_checks">Health checks</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>WARNING: Breaking change!</strong></p>
</div>
<div class="paragraph">
<p>The health check API and protocol has been updated to make it easier to use. Unlike the prior version, <code>/health</code> now aggregates
all checks and returns a combined response with a single outcome. You would still expose health checks using JAX-RS resources, but you only need to know <code>/health</code> as the entry point for clients to verify the liveliness of your node (i.e. kubernetes). Along these lines, we&#8217;ve removed <code>CompositeHealthStatus</code>, because that&#8217;s implied by the former.</p>
</div>
<div class="paragraph">
<p>Security has been simplified as well. It&#8217;s now an all-or-nothing approach. If you define a security realm all endpoints will be secured, as such the attribute <code>inheritSecurity</code> on <code>@Health</code> has been removed.</p>
</div>
<div class="paragraph">
<p>Checks now <strong>require</strong> an ID (or name) to identify them in composite responses. Hence the builder API on <code>HealthStatus</code> has been modified to reflect this.</p>
</div>
<div class="paragraph">
<p>Taking everything into account, the wireformat has changed slightly as well. A regular response, now looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
    "checks": [
        {
            "data": {
                "freebytes": 35445936128
            },
            "id": "diskspace",
            "result": "UP"
        },
        {
            "data": {
                "date": "Fri Dec 02 09:50:12 CET 2016",
                "time": 1480668612010
            },
            "id": "something-else",
            "result": "UP"
        }
    ],
    "outcome": "UP"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changelog">Changelog</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Release notes for 2016.12.0 are available <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12317020&amp;version=12331464">here</a>.</p>
</div>
<div class="sect2">
<h3 id="_bug">Bug</h3>
<div class="ulist">
<ul>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-864">SWARM-864</a>] Ensure BYO JDBC works with Windows paths. (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-862">SWARM-862</a>] Multi Module Api in testsuite is not added to repo, so breaks when doing <code>mvn dependency:tree</code> (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-860">SWARM-860</a>] Health examples fail with NoClassDefFoundError: org/jboss/dmr/ModelNode (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-858">SWARM-858</a>] additional fractions: unintuitive behavior if the fraction is not found (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-857">SWARM-857</a>] Secured Ribbon client gets CNFE on KeycloakSecurityContextAssociation when trying to propagate Bearer token (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-854">SWARM-854</a>] fraction autodetection is hard to debug (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-853">SWARM-853</a>] @DefaultDeployment bungles paths on Windows (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-850">SWARM-850</a>] forgotten System.getProperty calls after the @Configurable conversion (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-848">SWARM-848</a>] ServiceName ClassLoading issue with TopologyWebAppActivator (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-846">SWARM-846</a>] Topology ProxyService&#8217;s are never started (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-845">SWARM-845</a>] Unsatisfied dependencies for type RemotingFraction (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-844">SWARM-844</a>] Gradle project dependencies with 2 colons are resolved as jar dependencies (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-833">SWARM-833</a>] bad default mod_cluster multicast address (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-825">SWARM-825</a>] Container :api and :runtime modules don&#8217;t include/exclude correct packages (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-744">SWARM-744</a>] Failed to process logging directory /. Log files cannot be listed (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-698">SWARM-698</a>] Example README doc code does not match actual code (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-612">SWARM-612</a>] jboss-cli reload results in 404 / no deployment (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-610">SWARM-610</a>] The wildfly-self-contained.d directory lingers. (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-204">SWARM-204</a>] Exception when connecting Jolokia JVM agent. (Done)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancement">Enhancement</h3>
<div class="ulist">
<ul>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-851">SWARM-851</a>] add a test that a custom main method in a WAR project is actually executed (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-739">SWARM-739</a>] Formalize configuration values (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-714">SWARM-714</a>] Hide Fractions from developer that are just exposing WF modules, such as <code>jaxrs-cdi</code> (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-693">SWARM-693</a>] Provide one well known default health check entrypoint (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-688">SWARM-688</a>] Don&#8217;t show internal Fractions in list at container startup (Done)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_task">Task</h3>
<div class="ulist">
<ul>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-823">SWARM-823</a>] [spike] Scope &amp; Review the ability to bring your own DB/JBDC (Done)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_component_upgrade">Component Upgrade</h3>
<div class="ulist">
<ul>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-810">SWARM-810</a>] Update to latest OpenShift Client in topology-openshift (Done)</p>
</li>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-686">SWARM-686</a>] Update to WF Core  2.2.1 (Done)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_feature_request">Feature Request</h3>
<div class="ulist">
<ul>
<li>
<p>[<a href="https://issues.jboss.org/browse/SWARM-723">SWARM-723</a>] Fraction for FluentD to integrate with EFK stack (Done)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Per usual, we tend to hang out on <code>irc.freenode.net</code> in <code>#wildfly-swarm</code>.</p>
</div>
<div class="paragraph">
<p>All bug and feature-tracking is kept in <a href="http://issues.jboss.org/browse/SWARM">JIRA</a>.</p>
</div>
<div class="paragraph">
<p>Examples are available in <a href="https://github.com/wildfly-swarm/wildfly-swarm-examples/tree/2016.12.0" class="bare">https://github.com/wildfly-swarm/wildfly-swarm-examples/tree/2016.12.0</a>.</p>
</div>
<div class="paragraph">
<p>Documentation for this release is <a href="/documentation/2016-12-0">available</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_thank_you_contributors">Thank you, Contributors!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We appreciate all of our contributors since the last release:</p>
</div>
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>Heiko Braun</p>
</li>
<li>
<p>Ken Finnigan</p>
</li>
<li>
<p>Bob McWhirter</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_examples">Examples</h3>
<div class="ulist">
<ul>
<li>
<p>srinivasavasu</p>
</li>
<li>
<p>Heiko Braun</p>
</li>
<li>
<p>Ken Finnigan</p>
</li>
<li>
<p>Bob McWhirter</p>
</li>
<li>
<p>Ladislav Thon</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_core">Core</h3>
<div class="ulist">
<ul>
<li>
<p>Heiko Braun</p>
</li>
<li>
<p>Alexander Egger</p>
</li>
<li>
<p>Ken Finnigan</p>
</li>
<li>
<p>Bob McWhirter</p>
</li>
<li>
<p>Ladislav Thon</p>
</li>
</ul>
</div>
</div>
</div>
</div></div></article></div></div></div></div><div class="footer-v1"><div class="footer"><div class="container"><div class="row"><div class="col-sm-6 md-margin-bottom-40"><p class="text-center"><Copyright>2016 - 2018 <a href="http://redhat.com">Red Hat, Inc.</a> | WildFly Swarm is Open Source Software</Copyright></p></div><div class="col-sm-6 md-margin-bottom-40"><p class="text-center"><span>We rely on the
<a href='http://www.ej-technologies.com/products/jprofiler/overview.html'>
Java profiler from EJ Technologies
</a><br/>
<img src='https://www.ej-technologies.com/images/product_banners/jprofiler_medium.png'/></span></p></div></div></div></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83419890-2', 'auto');
ga('send', 'pageview');

ga('create', 'UA-6435340-8', 'auto');
ga('send', 'pageview');
</script><script type="text/javascript" src="/assets/js/highlight.pack.js"></script><script type="text/javascript" src="/assets/plugins/jquery/jquery.min.js"></script><script type="text/javascript" src="/assets/plugins/jquery/jquery-migrate.min.js"></script><script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script><script type="text/javascript" src="/assets/plugins/back-to-top.js"></script><script type="text/javascript" src="/assets/plugins/smoothScroll.js"></script><script type="text/javascript" src="/assets/plugins/parallax-slider/js/modernizr.js"></script><script type="text/javascript" src="/assets/plugins/parallax-slider/js/jquery.cslider.js"></script><script type="text/javascript" src="/assets/plugins/owl-carousel/owl-carousel/owl.carousel.js"></script><script type="text/javascript" src="/assets/js/custom.js"></script><script type="text/javascript" src="/assets/js/app.js"></script><script type="text/javascript" src="/assets/js/plugins/owl-carousel.js"></script><script type="text/javascript" src="/assets/js/plugins/style-switcher.js"></script><script type="text/javascript" src="/assets/js/plugins/parallax-slider.js"></script><script>(function() {

  jQuery(document).ready(function() {
    App.init();
    OwlCarousel.initOwlCarousel();
    StyleSwitcher.initStyleSwitcher();
    ParallaxSlider.initParallaxSlider();

    hljs.initHighlightingOnLoad();
  });

})();
</script></body></html>